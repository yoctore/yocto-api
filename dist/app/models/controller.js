"use strict";function Controller(){this.tabModel=[]}var _=require("lodash"),mongoose=require("mongoose"),logger=require("yocto-logger"),Schema=mongoose.Schema,path=require("path"),glob=require("glob"),fs=require("fs");Controller.prototype.addModel=function(a,b){logger.info("[ ControllerModel.addModel ] - "+a),this.model=new Schema(b);var c=[a,b],d=mongoose.model.apply(mongoose,c);this.tabModel.push({name:a,mongooseModel:d})},Controller.prototype.init=function(a){logger.info("[ ControllerModels.init ] - start"),_.each(_.words(glob.sync(a+"*.json","cwd"),/[^,,]+/g),function(a){var b=JSON.parse(fs.readFileSync(a),"utf-8");this.addModel(b.models.model.name,b.models.model.properties)},this)},Controller.prototype.getModel=function(a){if(!_.isEmpty(a)&&_.isString(a)){var b=_.findIndex(this.tabModel,{name:a});if(_.isUndefined(b)||b>=0)return logger.info("[ ControllerModels.getModel ] - get Model of : "+a),this.tabModel[b].mongooseModel}return logger.error("[ ControllerModels.getModel ] - error model not found, model name is : "+a),!1},module.exports=new Controller;